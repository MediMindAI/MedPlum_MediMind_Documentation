<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MediMind EMR - áƒ¡áƒáƒ¬áƒáƒ áƒ›áƒáƒ áƒ“áƒáƒ™áƒ£áƒ›áƒ”áƒœáƒ¢áƒáƒªáƒ˜áƒ</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="css/docs.css">
  <link rel="stylesheet" href="css/parts/01-variables.css">
  <link rel="stylesheet" href="css/parts/02-header.css">
  <link rel="stylesheet" href="css/parts/03-sidebar.css">
  <link rel="stylesheet" href="css/parts/04-content.css">
  <link rel="stylesheet" href="css/parts/05-components.css">
  <link rel="stylesheet" href="css/parts/06-tables.css">
  <link rel="stylesheet" href="css/parts/07-timeline.css">
  <link rel="stylesheet" href="css/parts/08-media.css">
  <link rel="stylesheet" href="css/parts/09-interactive.css">
  <link rel="stylesheet" href="css/parts/10-footer.css">
  <link rel="stylesheet" href="css/parts/11-print.css">
  <link rel="stylesheet" href="css/parts/12-responsive.css">
  <link rel="stylesheet" href="css/parts/13-lazy-loading.css">
  <link rel="stylesheet" href="css/parts/14-gallery.css">
  <link rel="stylesheet" href="css/page-styles.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Georgian:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Mermaid.js for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <!-- Sidebar push content styles -->
  <style>
    body.sidebar-open .doc-content {
      margin-left: 300px !important;
      transition: margin-left 0.4s ease !important;
    }
    .doc-content {
      transition: margin-left 0.4s ease !important;
    }
  </style>
</head>
<body>
  <!-- Search Modal (Ctrl+K) -->
  <div class="search-modal" id="searchModal">
    <div class="search-container">
      <div class="search-header">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        <input type="text" class="search-input" id="searchInput" data-i18n="search.placeholder" data-i18n-attr="placeholder" placeholder="áƒ«áƒ”áƒ‘áƒœáƒ áƒ“áƒáƒ™áƒ£áƒ›áƒ”áƒœáƒ¢áƒáƒªáƒ˜áƒáƒ¨áƒ˜...">
        <span class="search-shortcut" data-i18n="search.escHint">ESC</span>
      </div>
      <div class="search-results" id="searchResults">
        <div class="search-no-results" data-i18n="search.startTyping">áƒ“áƒáƒ˜áƒ¬áƒ§áƒ”áƒ— áƒáƒ™áƒ áƒ”áƒ¤áƒ áƒ«áƒ”áƒ‘áƒœáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡</div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="doc-header">
    <div class="doc-header-container">
      <a href="index.html" class="doc-header-brand">
        <div class="doc-logo-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="18" height="18" rx="3" stroke="white" stroke-width="2" fill="none"/>
            <path d="M12 7V17M7 12H17" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="doc-logo-text">
          <span class="doc-logo-title"><span class="doc-logo-title-medi">Medi</span><span class="doc-logo-title-mind">Mind</span></span>
          <span class="doc-logo-subtitle" data-i18n="header.brandSubtitle">EMR SYSTEM</span>
        </div>
      </a>
      <div class="doc-header-actions">
        <!-- Language Switcher -->
        <div class="lang-switcher">
          <button class="lang-btn active" data-lang="ka" onclick="I18n.switchLanguage('ka')" title="áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜">
            <span class="lang-flag">ğŸ‡¬ğŸ‡ª</span><span class="lang-code">KA</span>
          </button>
          <button class="lang-btn" data-lang="en" onclick="I18n.switchLanguage('en')" title="English">
            <span class="lang-flag">ğŸ‡¬ğŸ‡§</span><span class="lang-code">EN</span>
          </button>
          <button class="lang-btn" data-lang="ru" onclick="I18n.switchLanguage('ru')" title="Ğ ÑƒÑÑĞºĞ¸Ğ¹">
            <span class="lang-flag">ğŸ‡·ğŸ‡º</span><span class="lang-code">RU</span>
          </button>
        </div>
        <button class="doc-header-btn" onclick="openSearch()" data-i18n="aria.search" data-i18n-attr="title" title="áƒ«áƒ”áƒ‘áƒœáƒ (Ctrl+K)">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <span data-i18n="header.searchBtn">Ctrl+K</span>
        </button>
        <button class="doc-header-btn" onclick="window.print()" id="pdfBtn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
          <span data-i18n="header.pdfBtn">PDF</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Progress Bar -->
  <div class="doc-progress">
    <div class="doc-progress-bar" id="progressBar"></div>
  </div>

  <!-- Sidebar -->
  <aside class="doc-sidebar" id="sidebar">
    <div class="doc-sidebar-inner">
      <!-- TOC Header -->
      <div class="toc-header">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <span data-i18n="toc.title">áƒ¡áƒáƒ áƒ©áƒ”áƒ•áƒ˜</span>
      </div>

      <!-- TOC Tree - Dynamically generated from manifest -->
      <nav class="toc-tree" id="toc-tree">
        <!-- Loading skeleton -->
        <div class="toc-skeleton">
          <div class="toc-skeleton-item skeleton"></div>
          <div class="toc-skeleton-item skeleton"></div>
          <div class="toc-skeleton-item skeleton"></div>
          <div class="toc-skeleton-item skeleton"></div>
          <div class="toc-skeleton-item skeleton"></div>
          <div class="toc-skeleton-item skeleton"></div>
        </div>
      </nav>
    </div>
  </aside>

  <!-- Sidebar Overlay -->
  <div class="doc-sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar Toggle Button -->
  <button class="doc-sidebar-toggle" id="sidebarToggle" data-i18n="aria.menuOpen" data-i18n-attr="aria-label" aria-label="áƒ›áƒ”áƒœáƒ˜áƒ£áƒ¡ áƒ’áƒáƒ®áƒ¡áƒœáƒ">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <line class="hamburger-line hamburger-line-1" x1="4" y1="6" x2="20" y2="6" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      <line class="hamburger-line hamburger-line-2" x1="4" y1="12" x2="20" y2="12" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
      <line class="hamburger-line hamburger-line-3" x1="4" y1="18" x2="20" y2="18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
    </svg>
  </button>

  <!-- Back to Top Button -->
  <button class="doc-back-to-top" id="backToTop" data-i18n="aria.backToTop" data-i18n-attr="aria-label" aria-label="áƒ–áƒ”áƒ›áƒáƒ— áƒ“áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
    </svg>
  </button>

  <!-- Main Content -->
  <main class="doc-content">
    <div class="doc-content-inner">

      <!-- Hero Section -->
      <div class="doc-hero-compact">
        <div class="doc-hero-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="3" y="3" width="18" height="18" rx="3" stroke-linecap="round" stroke-linejoin="round"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 7V17M7 12H17"/>
          </svg>
        </div>
        <div class="doc-hero-text">
          <h1 data-i18n="hero.title">MediMind EMR áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ</h1>
          <p data-i18n="hero.subtitle">áƒ¡áƒáƒ¬áƒáƒ áƒ›áƒáƒ áƒ“áƒáƒ™áƒ£áƒ›áƒ”áƒœáƒ¢áƒáƒªáƒ˜áƒ IT áƒ¡áƒáƒ”áƒªáƒ˜áƒáƒšáƒ˜áƒ¡áƒ¢áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡</p>
        </div>
        <div class="doc-hero-badge">
          <span data-i18n="hero.version">v2.0</span>
        </div>
      </div>

      <!-- ==================== SECTIONS CONTAINER ==================== -->
      <!-- Sections are loaded dynamically via JavaScript -->
      <div id="sectionsContainer">
        <div class="section-loading" data-i18n="loading.sections">áƒ¡áƒ”áƒ¥áƒªáƒ˜áƒ”áƒ‘áƒ˜ áƒ˜áƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ‘áƒ...</div>
      </div>

      <!-- Footer -->
      <footer class="doc-footer">
        <p data-i18n="footer.copyright">&copy; 2026 MediMind EMR. áƒ•áƒ”áƒ áƒ¡áƒ˜áƒ 2.0 | áƒ¡áƒáƒ¬áƒáƒ áƒ›áƒáƒ áƒ“áƒáƒ™áƒ£áƒ›áƒ”áƒœáƒ¢áƒáƒªáƒ˜áƒ</p>
      </footer>
    </div>
  </main>

  <!-- Lightbox Modal -->
  <div id="lightboxModal" class="lightbox-modal">
    <span class="lightbox-close">&times;</span>
    <img class="lightbox-content" id="lightboxImg">
  </div>

  <!-- Scripts -->
  <!-- Core modules (load first) -->
  <script src="js/core/cache.js"></script>
  <script src="js/core/manifest-loader.js"></script>
  <script src="js/core/router.js"></script>
  <script src="js/core/search-indexer.js"></script>

  <!-- Main modules -->
  <script src="js/i18n.js"></script>
  <script src="js/toc-generator.js"></script>
  <script src="js/docs.js"></script>
  <script src="js/section-loader.js"></script>
  <script src="js/page.js"></script>
  <script src="js/gallery.js"></script>

  <!-- Initialize application -->
  <script>
    // Initialize everything after DOM is ready
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // 1. Load manifest
        const manifest = await ManifestLoader.load();

        // 2. Initialize router with manifest
        Router.init(manifest);

        // 3. Wait for I18n to initialize
        await new Promise(resolve => {
          if (I18n.initialized) {
            resolve();
          } else {
            const checkInit = setInterval(() => {
              if (I18n.initialized) {
                clearInterval(checkInit);
                resolve();
              }
            }, 50);
          }
        });

        // 4. Generate TOC from manifest
        TocGenerator.init(manifest, 'toc-tree');

        console.log('Application initialized with manifest-based architecture');
      } catch (error) {
        console.warn('Falling back to legacy mode:', error);
      }
    });
  </script>
</body>
</html>
